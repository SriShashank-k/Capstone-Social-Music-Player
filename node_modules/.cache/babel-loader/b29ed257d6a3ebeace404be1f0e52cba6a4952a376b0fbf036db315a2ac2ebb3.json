{"ast":null,"code":"var _jsxFileName = \"/Users/shashank/Downloads/music-player-app-fixed-working/src/components/ChatBox.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { db } from '../firebase';\nimport { collection, addDoc, query, orderBy, onSnapshot, serverTimestamp, doc, updateDoc, arrayUnion, arrayRemove, getDoc, deleteDoc } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatBox = ({\n  songId,\n  currentUserName\n}) => {\n  _s();\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const userId = localStorage.getItem('spotify_display_name') || 'Anonymous';\n  const [replyingTo, setReplyingTo] = useState(null);\n  useEffect(() => {\n    if (!songId) return;\n    const q = query(collection(db, 'comments', songId, 'messages'), orderBy('timestamp', 'asc'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const msgs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      const grouped = msgs.reduce((acc, msg) => {\n        if (!msg.parentMessageId) {\n          acc.push({\n            ...msg,\n            replies: []\n          });\n        } else {\n          const parent = acc.find(m => m.id === msg.parentMessageId);\n          if (parent) {\n            parent.replies.push(msg);\n          }\n        }\n        return acc;\n      }, []);\n      setMessages(grouped);\n    });\n    return () => unsubscribe();\n  }, [songId]);\n  const sendMessage = async () => {\n    if (!message.trim()) return;\n    await addDoc(collection(db, 'comments', songId, 'messages'), {\n      text: message,\n      user: currentUserName,\n      userId: userId,\n      // Save userId for moderation\n      timestamp: serverTimestamp(),\n      parentMessageId: replyingTo ? replyingTo.id : null,\n      likes: []\n    });\n    setMessage('');\n    setReplyingTo(null);\n  };\n  const toggleLike = async msgId => {\n    const msgRef = doc(db, 'comments', songId, 'messages', msgId);\n    const msgSnap = await getDoc(msgRef);\n    if (msgSnap.exists()) {\n      const msgData = msgSnap.data();\n      const currentLikes = msgData.likes || [];\n      if (currentLikes.includes(userId)) {\n        await updateDoc(msgRef, {\n          likes: arrayRemove(userId)\n        });\n      } else {\n        await updateDoc(msgRef, {\n          likes: arrayUnion(userId)\n        });\n      }\n    }\n  };\n\n  // 🔥 Delete Comment\n  const deleteComment = async msgId => {\n    const msgRef = doc(db, 'comments', songId, 'messages', msgId);\n    await deleteDoc(msgRef);\n  };\n\n  // 🚩 Report Comment\n  const reportComment = async msgId => {\n    await addDoc(collection(db, 'reports'), {\n      commentId: msgId,\n      songId: songId,\n      reportedBy: userId,\n      timestamp: serverTimestamp()\n    });\n    alert('Comment reported!');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-800 text-white p-4 rounded mt-4 max-h-60 overflow-y-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-semibold mb-2\",\n      children: \"\\uD83D\\uDCAC Chat for this Song\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), messages.map(msg => {\n      var _msg$likes, _msg$likes2;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-700 p-2 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: msg.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3 mt-2 text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `${(_msg$likes = msg.likes) !== null && _msg$likes !== void 0 && _msg$likes.includes(userId) ? 'text-blue-400' : 'text-gray-400'}`,\n              onClick: () => toggleLike(msg.id),\n              children: [\"\\uD83D\\uDC4D \", ((_msg$likes2 = msg.likes) === null || _msg$likes2 === void 0 ? void 0 : _msg$likes2.length) || 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this), msg.userId === userId && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"text-red-400\",\n              onClick: () => deleteComment(msg.id),\n              children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"text-yellow-400\",\n              onClick: () => reportComment(msg.id),\n              children: \"\\uD83D\\uDEA9 Report\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"text-xs text-green-400 mt-1\",\n            onClick: () => {\n              setReplyingTo(msg);\n              setMessage(`@${msg.user} `);\n            },\n            children: \"Reply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), msg.replies.map(reply => {\n          var _reply$likes, _reply$likes2;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-6 mt-1 bg-gray-600 p-2 rounded\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: reply.user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: reply.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-3 mt-2 text-xs\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `${(_reply$likes = reply.likes) !== null && _reply$likes !== void 0 && _reply$likes.includes(userId) ? 'text-blue-400' : 'text-gray-400'}`,\n                onClick: () => toggleLike(reply.id),\n                children: [\"\\uD83D\\uDC4D \", ((_reply$likes2 = reply.likes) === null || _reply$likes2 === void 0 ? void 0 : _reply$likes2.length) || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 17\n              }, this), reply.userId === userId && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"text-red-400\",\n                onClick: () => deleteComment(reply.id),\n                children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"text-yellow-400\",\n                onClick: () => reportComment(reply.id),\n                children: \"\\uD83D\\uDEA9 Report\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this)]\n          }, reply.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this);\n        })]\n      }, msg.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 mt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"flex-grow p-2 rounded bg-gray-900 text-white text-sm\",\n        placeholder: replyingTo ? `Replying to ${replyingTo.user}` : 'Write a comment...',\n        value: message,\n        onChange: e => setMessage(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        className: \"bg-green-600 px-3 rounded hover:bg-green-700 text-sm\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), replyingTo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-xs mt-1 text-gray-300\",\n      children: [\"Replying to \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: replyingTo.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 23\n      }, this), ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setReplyingTo(null),\n        className: \"text-red-400 ml-2\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatBox, \"wmXGzr5SSFaXnqwVLsVgfMZae3o=\");\n_c = ChatBox;\nexport default ChatBox;\nvar _c;\n$RefreshReg$(_c, \"ChatBox\");","map":{"version":3,"names":["useEffect","useState","db","collection","addDoc","query","orderBy","onSnapshot","serverTimestamp","doc","updateDoc","arrayUnion","arrayRemove","getDoc","deleteDoc","jsxDEV","_jsxDEV","ChatBox","songId","currentUserName","_s","message","setMessage","messages","setMessages","userId","localStorage","getItem","replyingTo","setReplyingTo","q","unsubscribe","snapshot","msgs","docs","map","id","data","grouped","reduce","acc","msg","parentMessageId","push","replies","parent","find","m","sendMessage","trim","text","user","timestamp","likes","toggleLike","msgId","msgRef","msgSnap","exists","msgData","currentLikes","includes","deleteComment","reportComment","commentId","reportedBy","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_msg$likes","_msg$likes2","onClick","length","reply","_reply$likes","_reply$likes2","placeholder","value","onChange","e","target","_c","$RefreshReg$"],"sources":["/Users/shashank/Downloads/music-player-app-fixed-working/src/components/ChatBox.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { db } from '../firebase';\nimport {\n  collection,\n  addDoc,\n  query,\n  orderBy,\n  onSnapshot,\n  serverTimestamp,\n  doc,\n  updateDoc,\n  arrayUnion,\n  arrayRemove,\n  getDoc,\n  deleteDoc\n} from 'firebase/firestore';\n\nconst ChatBox = ({ songId, currentUserName }) => {\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const userId = localStorage.getItem('spotify_display_name') || 'Anonymous';\n  const [replyingTo, setReplyingTo] = useState(null);\n\n  useEffect(() => {\n    if (!songId) return;\n\n    const q = query(\n      collection(db, 'comments', songId, 'messages'),\n      orderBy('timestamp', 'asc')\n    );\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const msgs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n\n      const grouped = msgs.reduce((acc, msg) => {\n        if (!msg.parentMessageId) {\n          acc.push({ ...msg, replies: [] });\n        } else {\n          const parent = acc.find(m => m.id === msg.parentMessageId);\n          if (parent) {\n            parent.replies.push(msg);\n          }\n        }\n        return acc;\n      }, []);\n\n      setMessages(grouped);\n    });\n\n    return () => unsubscribe();\n  }, [songId]);\n\n  const sendMessage = async () => {\n    if (!message.trim()) return;\n\n    await addDoc(collection(db, 'comments', songId, 'messages'), {\n      text: message,\n      user: currentUserName,\n      userId: userId,  // Save userId for moderation\n      timestamp: serverTimestamp(),\n      parentMessageId: replyingTo ? replyingTo.id : null,\n      likes: []\n    });\n\n    setMessage('');\n    setReplyingTo(null);\n  };\n\n  const toggleLike = async (msgId) => {\n    const msgRef = doc(db, 'comments', songId, 'messages', msgId);\n    const msgSnap = await getDoc(msgRef);\n\n    if (msgSnap.exists()) {\n      const msgData = msgSnap.data();\n      const currentLikes = msgData.likes || [];\n\n      if (currentLikes.includes(userId)) {\n        await updateDoc(msgRef, {\n          likes: arrayRemove(userId),\n        });\n      } else {\n        await updateDoc(msgRef, {\n          likes: arrayUnion(userId),\n        });\n      }\n    }\n  };\n\n  // 🔥 Delete Comment\n  const deleteComment = async (msgId) => {\n    const msgRef = doc(db, 'comments', songId, 'messages', msgId);\n    await deleteDoc(msgRef);\n  };\n\n  // 🚩 Report Comment\n  const reportComment = async (msgId) => {\n    await addDoc(collection(db, 'reports'), {\n      commentId: msgId,\n      songId: songId,\n      reportedBy: userId,\n      timestamp: serverTimestamp()\n    });\n    alert('Comment reported!');\n  };\n\n  return (\n    <div className=\"bg-gray-800 text-white p-4 rounded mt-4 max-h-60 overflow-y-auto\">\n      <h3 className=\"text-lg font-semibold mb-2\">💬 Chat for this Song</h3>\n\n      {messages.map((msg) => (\n        <div key={msg.id} className=\"mb-3\">\n          <div className=\"bg-gray-700 p-2 rounded\">\n            <span className=\"font-semibold\">{msg.user}</span>\n            <div>{msg.text}</div>\n\n            <div className=\"flex items-center gap-3 mt-2 text-xs\">\n              {/* Like Button */}\n              <button\n                className={`${\n                  msg.likes?.includes(userId) ? 'text-blue-400' : 'text-gray-400'\n                }`}\n                onClick={() => toggleLike(msg.id)}\n              >\n                👍 {msg.likes?.length || 0}\n              </button>\n\n              {/* Moderation Buttons */}\n              {msg.userId === userId && (\n                <button\n                  className=\"text-red-400\"\n                  onClick={() => deleteComment(msg.id)}\n                >\n                  🗑️ Delete\n                </button>\n              )}\n              <button\n                className=\"text-yellow-400\"\n                onClick={() => reportComment(msg.id)}\n              >\n                🚩 Report\n              </button>\n            </div>\n\n            <button\n              className=\"text-xs text-green-400 mt-1\"\n              onClick={() => {\n                setReplyingTo(msg);\n                setMessage(`@${msg.user} `);\n              }}\n            >\n              Reply\n            </button>\n          </div>\n\n          {/* Replies */}\n          {msg.replies.map((reply) => (\n            <div key={reply.id} className=\"ml-6 mt-1 bg-gray-600 p-2 rounded\">\n              <span className=\"font-semibold\">{reply.user}</span>\n              <div>{reply.text}</div>\n\n              <div className=\"flex items-center gap-3 mt-2 text-xs\">\n                <button\n                  className={`${\n                    reply.likes?.includes(userId) ? 'text-blue-400' : 'text-gray-400'\n                  }`}\n                  onClick={() => toggleLike(reply.id)}\n                >\n                  👍 {reply.likes?.length || 0}\n                </button>\n\n                {reply.userId === userId && (\n                  <button\n                    className=\"text-red-400\"\n                    onClick={() => deleteComment(reply.id)}\n                  >\n                    🗑️ Delete\n                  </button>\n                )}\n                <button\n                  className=\"text-yellow-400\"\n                  onClick={() => reportComment(reply.id)}\n                >\n                  🚩 Report\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      ))}\n\n      {/* Input */}\n      <div className=\"flex gap-2 mt-2\">\n        <input\n          className=\"flex-grow p-2 rounded bg-gray-900 text-white text-sm\"\n          placeholder={\n            replyingTo ? `Replying to ${replyingTo.user}` : 'Write a comment...'\n          }\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n        />\n        <button\n          onClick={sendMessage}\n          className=\"bg-green-600 px-3 rounded hover:bg-green-700 text-sm\"\n        >\n          Send\n        </button>\n      </div>\n\n      {/* Cancel reply */}\n      {replyingTo && (\n        <div className=\"text-xs mt-1 text-gray-300\">\n          Replying to <strong>{replyingTo.user}</strong>{' '}\n          <button onClick={() => setReplyingTo(null)} className=\"text-red-400 ml-2\">\n            Cancel\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatBox;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,EAAE,QAAQ,aAAa;AAChC,SACEC,UAAU,EACVC,MAAM,EACNC,KAAK,EACLC,OAAO,EACPC,UAAU,EACVC,eAAe,EACfC,GAAG,EACHC,SAAS,EACTC,UAAU,EACVC,WAAW,EACXC,MAAM,EACNC,SAAS,QACJ,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5B,MAAMC,OAAO,GAAGA,CAAC;EAAEC,MAAM;EAAEC;AAAgB,CAAC,KAAK;EAAAC,EAAA;EAC/C,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAMwB,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,sBAAsB,CAAC,IAAI,WAAW;EAC1E,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAElDD,SAAS,CAAC,MAAM;IACd,IAAI,CAACkB,MAAM,EAAE;IAEb,MAAMY,CAAC,GAAGzB,KAAK,CACbF,UAAU,CAACD,EAAE,EAAE,UAAU,EAAEgB,MAAM,EAAE,UAAU,CAAC,EAC9CZ,OAAO,CAAC,WAAW,EAAE,KAAK,CAC5B,CAAC;IAED,MAAMyB,WAAW,GAAGxB,UAAU,CAACuB,CAAC,EAAGE,QAAQ,IAAK;MAC9C,MAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAAC1B,GAAG,KAAK;QACrC2B,EAAE,EAAE3B,GAAG,CAAC2B,EAAE;QACV,GAAG3B,GAAG,CAAC4B,IAAI,CAAC;MACd,CAAC,CAAC,CAAC;MAEH,MAAMC,OAAO,GAAGL,IAAI,CAACM,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;QACxC,IAAI,CAACA,GAAG,CAACC,eAAe,EAAE;UACxBF,GAAG,CAACG,IAAI,CAAC;YAAE,GAAGF,GAAG;YAAEG,OAAO,EAAE;UAAG,CAAC,CAAC;QACnC,CAAC,MAAM;UACL,MAAMC,MAAM,GAAGL,GAAG,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACX,EAAE,KAAKK,GAAG,CAACC,eAAe,CAAC;UAC1D,IAAIG,MAAM,EAAE;YACVA,MAAM,CAACD,OAAO,CAACD,IAAI,CAACF,GAAG,CAAC;UAC1B;QACF;QACA,OAAOD,GAAG;MACZ,CAAC,EAAE,EAAE,CAAC;MAENhB,WAAW,CAACc,OAAO,CAAC;IACtB,CAAC,CAAC;IAEF,OAAO,MAAMP,WAAW,CAAC,CAAC;EAC5B,CAAC,EAAE,CAACb,MAAM,CAAC,CAAC;EAEZ,MAAM8B,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI,CAAC3B,OAAO,CAAC4B,IAAI,CAAC,CAAC,EAAE;IAErB,MAAM7C,MAAM,CAACD,UAAU,CAACD,EAAE,EAAE,UAAU,EAAEgB,MAAM,EAAE,UAAU,CAAC,EAAE;MAC3DgC,IAAI,EAAE7B,OAAO;MACb8B,IAAI,EAAEhC,eAAe;MACrBM,MAAM,EAAEA,MAAM;MAAG;MACjB2B,SAAS,EAAE5C,eAAe,CAAC,CAAC;MAC5BkC,eAAe,EAAEd,UAAU,GAAGA,UAAU,CAACQ,EAAE,GAAG,IAAI;MAClDiB,KAAK,EAAE;IACT,CAAC,CAAC;IAEF/B,UAAU,CAAC,EAAE,CAAC;IACdO,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,MAAMyB,UAAU,GAAG,MAAOC,KAAK,IAAK;IAClC,MAAMC,MAAM,GAAG/C,GAAG,CAACP,EAAE,EAAE,UAAU,EAAEgB,MAAM,EAAE,UAAU,EAAEqC,KAAK,CAAC;IAC7D,MAAME,OAAO,GAAG,MAAM5C,MAAM,CAAC2C,MAAM,CAAC;IAEpC,IAAIC,OAAO,CAACC,MAAM,CAAC,CAAC,EAAE;MACpB,MAAMC,OAAO,GAAGF,OAAO,CAACpB,IAAI,CAAC,CAAC;MAC9B,MAAMuB,YAAY,GAAGD,OAAO,CAACN,KAAK,IAAI,EAAE;MAExC,IAAIO,YAAY,CAACC,QAAQ,CAACpC,MAAM,CAAC,EAAE;QACjC,MAAMf,SAAS,CAAC8C,MAAM,EAAE;UACtBH,KAAK,EAAEzC,WAAW,CAACa,MAAM;QAC3B,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,MAAMf,SAAS,CAAC8C,MAAM,EAAE;UACtBH,KAAK,EAAE1C,UAAU,CAACc,MAAM;QAC1B,CAAC,CAAC;MACJ;IACF;EACF,CAAC;;EAED;EACA,MAAMqC,aAAa,GAAG,MAAOP,KAAK,IAAK;IACrC,MAAMC,MAAM,GAAG/C,GAAG,CAACP,EAAE,EAAE,UAAU,EAAEgB,MAAM,EAAE,UAAU,EAAEqC,KAAK,CAAC;IAC7D,MAAMzC,SAAS,CAAC0C,MAAM,CAAC;EACzB,CAAC;;EAED;EACA,MAAMO,aAAa,GAAG,MAAOR,KAAK,IAAK;IACrC,MAAMnD,MAAM,CAACD,UAAU,CAACD,EAAE,EAAE,SAAS,CAAC,EAAE;MACtC8D,SAAS,EAAET,KAAK;MAChBrC,MAAM,EAAEA,MAAM;MACd+C,UAAU,EAAExC,MAAM;MAClB2B,SAAS,EAAE5C,eAAe,CAAC;IAC7B,CAAC,CAAC;IACF0D,KAAK,CAAC,mBAAmB,CAAC;EAC5B,CAAC;EAED,oBACElD,OAAA;IAAKmD,SAAS,EAAC,kEAAkE;IAAAC,QAAA,gBAC/EpD,OAAA;MAAImD,SAAS,EAAC,4BAA4B;MAAAC,QAAA,EAAC;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAEpEjD,QAAQ,CAACY,GAAG,CAAEM,GAAG;MAAA,IAAAgC,UAAA,EAAAC,WAAA;MAAA,oBAChB1D,OAAA;QAAkBmD,SAAS,EAAC,MAAM;QAAAC,QAAA,gBAChCpD,OAAA;UAAKmD,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBACtCpD,OAAA;YAAMmD,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAE3B,GAAG,CAACU;UAAI;YAAAkB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACjDxD,OAAA;YAAAoD,QAAA,EAAM3B,GAAG,CAACS;UAAI;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAErBxD,OAAA;YAAKmD,SAAS,EAAC,sCAAsC;YAAAC,QAAA,gBAEnDpD,OAAA;cACEmD,SAAS,EAAE,GACT,CAAAM,UAAA,GAAAhC,GAAG,CAACY,KAAK,cAAAoB,UAAA,eAATA,UAAA,CAAWZ,QAAQ,CAACpC,MAAM,CAAC,GAAG,eAAe,GAAG,eAAe,EAC9D;cACHkD,OAAO,EAAEA,CAAA,KAAMrB,UAAU,CAACb,GAAG,CAACL,EAAE,CAAE;cAAAgC,QAAA,GACnC,eACI,EAAC,EAAAM,WAAA,GAAAjC,GAAG,CAACY,KAAK,cAAAqB,WAAA,uBAATA,WAAA,CAAWE,MAAM,KAAI,CAAC;YAAA;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpB,CAAC,EAGR/B,GAAG,CAAChB,MAAM,KAAKA,MAAM,iBACpBT,OAAA;cACEmD,SAAS,EAAC,cAAc;cACxBQ,OAAO,EAAEA,CAAA,KAAMb,aAAa,CAACrB,GAAG,CAACL,EAAE,CAAE;cAAAgC,QAAA,EACtC;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CACT,eACDxD,OAAA;cACEmD,SAAS,EAAC,iBAAiB;cAC3BQ,OAAO,EAAEA,CAAA,KAAMZ,aAAa,CAACtB,GAAG,CAACL,EAAE,CAAE;cAAAgC,QAAA,EACtC;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAENxD,OAAA;YACEmD,SAAS,EAAC,6BAA6B;YACvCQ,OAAO,EAAEA,CAAA,KAAM;cACb9C,aAAa,CAACY,GAAG,CAAC;cAClBnB,UAAU,CAAC,IAAImB,GAAG,CAACU,IAAI,GAAG,CAAC;YAC7B,CAAE;YAAAiB,QAAA,EACH;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,EAGL/B,GAAG,CAACG,OAAO,CAACT,GAAG,CAAE0C,KAAK;UAAA,IAAAC,YAAA,EAAAC,aAAA;UAAA,oBACrB/D,OAAA;YAAoBmD,SAAS,EAAC,mCAAmC;YAAAC,QAAA,gBAC/DpD,OAAA;cAAMmD,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAES,KAAK,CAAC1B;YAAI;cAAAkB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACnDxD,OAAA;cAAAoD,QAAA,EAAMS,KAAK,CAAC3B;YAAI;cAAAmB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAEvBxD,OAAA;cAAKmD,SAAS,EAAC,sCAAsC;cAAAC,QAAA,gBACnDpD,OAAA;gBACEmD,SAAS,EAAE,GACT,CAAAW,YAAA,GAAAD,KAAK,CAACxB,KAAK,cAAAyB,YAAA,eAAXA,YAAA,CAAajB,QAAQ,CAACpC,MAAM,CAAC,GAAG,eAAe,GAAG,eAAe,EAChE;gBACHkD,OAAO,EAAEA,CAAA,KAAMrB,UAAU,CAACuB,KAAK,CAACzC,EAAE,CAAE;gBAAAgC,QAAA,GACrC,eACI,EAAC,EAAAW,aAAA,GAAAF,KAAK,CAACxB,KAAK,cAAA0B,aAAA,uBAAXA,aAAA,CAAaH,MAAM,KAAI,CAAC;cAAA;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtB,CAAC,EAERK,KAAK,CAACpD,MAAM,KAAKA,MAAM,iBACtBT,OAAA;gBACEmD,SAAS,EAAC,cAAc;gBACxBQ,OAAO,EAAEA,CAAA,KAAMb,aAAa,CAACe,KAAK,CAACzC,EAAE,CAAE;gBAAAgC,QAAA,EACxC;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CACT,eACDxD,OAAA;gBACEmD,SAAS,EAAC,iBAAiB;gBAC3BQ,OAAO,EAAEA,CAAA,KAAMZ,aAAa,CAACc,KAAK,CAACzC,EAAE,CAAE;gBAAAgC,QAAA,EACxC;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA,GA5BEK,KAAK,CAACzC,EAAE;YAAAiC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OA6Bb,CAAC;QAAA,CACP,CAAC;MAAA,GA5EM/B,GAAG,CAACL,EAAE;QAAAiC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OA6EX,CAAC;IAAA,CACP,CAAC,eAGFxD,OAAA;MAAKmD,SAAS,EAAC,iBAAiB;MAAAC,QAAA,gBAC9BpD,OAAA;QACEmD,SAAS,EAAC,sDAAsD;QAChEa,WAAW,EACTpD,UAAU,GAAG,eAAeA,UAAU,CAACuB,IAAI,EAAE,GAAG,oBACjD;QACD8B,KAAK,EAAE5D,OAAQ;QACf6D,QAAQ,EAAGC,CAAC,IAAK7D,UAAU,CAAC6D,CAAC,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC,eACFxD,OAAA;QACE2D,OAAO,EAAE3B,WAAY;QACrBmB,SAAS,EAAC,sDAAsD;QAAAC,QAAA,EACjE;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EAGL5C,UAAU,iBACTZ,OAAA;MAAKmD,SAAS,EAAC,4BAA4B;MAAAC,QAAA,GAAC,cAC9B,eAAApD,OAAA;QAAAoD,QAAA,EAASxC,UAAU,CAACuB;MAAI;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC,EAAC,GAAG,eAClDxD,OAAA;QAAQ2D,OAAO,EAAEA,CAAA,KAAM9C,aAAa,CAAC,IAAI,CAAE;QAACsC,SAAS,EAAC,mBAAmB;QAAAC,QAAA,EAAC;MAE1E;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACpD,EAAA,CA7MIH,OAAO;AAAAoE,EAAA,GAAPpE,OAAO;AA+Mb,eAAeA,OAAO;AAAC,IAAAoE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}